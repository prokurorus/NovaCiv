# ‚úÖ NEWS-CRON FIX REPORT

**–î–∞—Ç–∞:** 2026-01-11  
**Commit:** `c125082`  
**Message:** `fix: unblock news-cron schedule (token + heartbeat)`

---

## üìù –í–´–ü–û–õ–ù–ï–ù–ù–´–ï –ò–ó–ú–ï–ù–ï–ù–ò–Ø

### 1Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ReferenceError (startTime/runId)

**–§–∞–π–ª:** `netlify/functions/news-cron.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è `startTime` –∏ `runId` –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ `handler` (—Å—Ç—Ä–æ–∫–∏ 153-154)
- –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∫–∞–∫ –≤ `try`, —Ç–∞–∫ –∏ –≤ `catch` –±–ª–æ–∫–µ
- –£–¥–∞–ª–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ `catch` –±–ª–æ–∫–µ (—Ä–∞–Ω–µ–µ —Å—Ç—Ä–æ–∫–∏ 265-266)

**–ë—ã–ª–æ:**
```javascript
exports.handler = async (event) => {
  try {
    // ... –∫–æ–¥ ...
    await writeHealthMetrics({
      ts: startTime,  // ‚ùå ReferenceError: startTime is not defined
      runId,          // ‚ùå ReferenceError: runId is not defined
    });
  } catch (err) {
    const runId = `news-cron-${Date.now()}`;  // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ –∑–¥–µ—Å—å
    const startTime = Date.now();              // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ —Ç–æ–ª—å–∫–æ –∑–¥–µ—Å—å
  }
};
```

**–°—Ç–∞–ª–æ:**
```javascript
exports.handler = async (event) => {
  const startTime = Date.now();  // ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ –Ω–∞—á–∞–ª–µ
  const runId = `news-cron-${startTime}`;  // ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –≤ –Ω–∞—á–∞–ª–µ
  
  try {
    // ... –∫–æ–¥ ...
    await writeHealthMetrics({
      ts: startTime,  // ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞
      runId,          // ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞
    });
  } catch (err) {
    // ‚úÖ –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–æ—Å—Ç—É–ø–Ω—ã –∏–∑ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
    await writeHealthMetrics({
      ts: startTime,
      runId,
    });
  }
};
```

---

### 2Ô∏è‚É£ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–∫–µ–Ω–∞ –¥–ª—è scheduled –≤—ã–∑–æ–≤–æ–≤

**–§–∞–π–ª:** `netlify/functions/news-cron.js`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ —Å–¥–µ–ª–∞–Ω–∞ —É—Å–ª–æ–≤–Ω–æ–π (—Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ `NEWS_CRON_SECRET` –∑–∞–¥–∞–Ω)
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `event.queryStringParameters` –≤–º–µ—Å—Ç–æ `URL.searchParams` –¥–ª—è –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏
- –£–¥–∞–ª–µ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ `NEWS_CRON_SECRET` (–±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500, –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω)

**–ë—ã–ª–æ:**
```javascript
if (!NEWS_CRON_SECRET) {
  return { statusCode: 500, ... };  // ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç scheduled –≤—ã–∑–æ–≤—ã
}

if (!token || token !== NEWS_CRON_SECRET) {
  return { statusCode: 403, ... };  // ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç scheduled –≤—ã–∑–æ–≤—ã
}
```

**–°—Ç–∞–ª–æ:**
```javascript
const qs = event.queryStringParameters || {};
if (NEWS_CRON_SECRET) {  // ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —Å–µ–∫—Ä–µ—Ç –∑–∞–¥–∞–Ω
  if (!qs.token || qs.token !== NEWS_CRON_SECRET) {
    return { statusCode: 403, ... };  // ‚úÖ –¢–æ–ª—å–∫–æ –¥–ª—è —Ä—É—á–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
  }
}
// ‚úÖ Scheduled –≤—ã–∑–æ–≤—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ —Ç–æ–∫–µ–Ω–∞
```

**–õ–æ–≥–∏–∫–∞:**
- –ï—Å–ª–∏ `NEWS_CRON_SECRET` –Ω–µ –∑–∞–¥–∞–Ω ‚Üí —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∑–∞—â–∏—Ç—ã (–¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)
- –ï—Å–ª–∏ `NEWS_CRON_SECRET` –∑–∞–¥–∞–Ω ‚Üí —Ç–æ–∫–µ–Ω —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä—É—á–Ω–æ–º –≤—ã–∑–æ–≤–µ (—Å query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏)
- Scheduled –≤—ã–∑–æ–≤—ã Netlify –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã, –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏

---

## ‚è∞ –†–ê–°–ü–ò–°–ê–ù–ò–ï –ó–ê–ü–£–°–ö–û–í

**news-cron.js:**
- **Schedule:** `0 * * * *` (–∫–∞–∂–¥—ã–π —á–∞—Å, –≤ 0 –º–∏–Ω—É—Ç)
- **–ë–ª–∏–∂–∞–π—à–∏–π –∑–∞–ø—É—Å–∫:** –°–ª–µ–¥—É—é—â–∏–π —á–∞—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ —Å–µ–π—á–∞—Å 14:30, —Ç–æ –≤ 15:00)
- **–§—É–Ω–∫—Ü–∏—è:** `netlify/functions/news-cron.js`

**fetch-news.js:**
- **Schedule:** `0 */3 * * *` (–∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞: 00:00, 03:00, 06:00, 09:00, 12:00, 15:00, 18:00, 21:00)
- **–§—É–Ω–∫—Ü–∏—è:** `netlify/functions/fetch-news.js`

---

## ‚úÖ –ß–ï–ö-–õ–ò–°–¢ –î–õ–Ø –ü–†–û–í–ï–†–ö–ò (RUSLAN)

### 1. Netlify Functions ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–µ–ø–ª–æ—è

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å Netlify Dashboard ‚Üí Site ‚Üí Functions
2. –ù–∞–π—Ç–∏ —Ñ—É–Ω–∫—Ü–∏—é `news-cron`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ —Å–ø–∏—Å–∫–µ —Ñ—É–Ω–∫—Ü–∏–π –≤–∏–¥–µ–Ω –ø–æ—Å–ª–µ–¥–Ω–∏–π deploy (commit `c125082`)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å timestamp –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ deploy (–¥–æ–ª–∂–µ–Ω —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–∏ push)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –§—É–Ω–∫—Ü–∏—è `news-cron` –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Å–ø–∏—Å–∫–µ
- ‚úÖ –ü–æ—Å–ª–µ–¥–Ω–∏–π deploy —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç commit `c125082`
- ‚úÖ Deploy timestamp –∞–∫—Ç—É–∞–ª—å–Ω—ã–π (–ø–æ—Å–ª–µ push –≤ main)

---

### 2. Netlify Functions ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤ (scheduled run)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –í Netlify Dashboard ‚Üí Functions ‚Üí `news-cron` ‚Üí Logs
2. –î–æ–∂–¥–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ scheduled run (–∫–∞–∂–¥—ã–π —á–∞—Å –≤ 0 –º–∏–Ω—É—Ç)
   - **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞:** –ï—Å–ª–∏ –¥–æ—Å—Ç—É–ø–µ–Ω Manual Invoke, –≤—ã–ø–æ–ª–Ω–∏—Ç—å –µ–≥–æ (–ù–û: –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è token –≤ query, –µ—Å–ª–∏ `NEWS_CRON_SECRET` –∑–∞–¥–∞–Ω)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–ï–¢ –æ—à–∏–±–æ–∫ `403 Forbidden: invalid token` (–ø—Ä–∏ scheduled –∑–∞–ø—É—Å–∫–µ)
- ‚úÖ –ù–ï–¢ –æ—à–∏–±–æ–∫ `ReferenceError: startTime is not defined`
- ‚úÖ –ù–ï–¢ –æ—à–∏–±–æ–∫ `ReferenceError: runId is not defined`
- ‚úÖ –í–∏–¥–Ω—ã –ª–æ–≥–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (status 200) –∏–ª–∏ –æ—à–∏–±–∫–∏ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ (–Ω–æ –Ω–µ –æ—à–∏–±–∫–∏ –∫–æ–¥–∞)

---

### 3. Health Endpoint ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å Netlify Dashboard ‚Üí Site ‚Üí Environment variables
2. –ù–∞–π—Ç–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `NEWS_CRON_SECRET` (—Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ, –ù–ï –ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å)
3. –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
   ```
   https://novaciv.netlify.app/.netlify/functions/health-news?token=[NEWS_CRON_SECRET]
   ```
   (–∑–∞–º–µ–Ω–∏—Ç—å `[NEWS_CRON_SECRET]` –Ω–∞ —Ä–µ–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å JSON –æ—Ç–≤–µ—Ç

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –û—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç `{ "ok": true, "fetch": {...}, "cron": {...} }`
- ‚úÖ `cron.ts` (timestamp) –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ `news-cron`
- ‚úÖ `cron.processed` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö —Ç–µ–º (–º–æ–∂–µ—Ç –±—ã—Ç—å 0, –µ—Å–ª–∏ –Ω–æ–≤—ã—Ö –Ω–µ—Ç)
- ‚úÖ `cron.totalSent` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π

**–ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞:**
```json
{
  "ok": true,
  "fetch": {
    "ts": 1704988800000,
    "processed": 2,
    "titles": ["News Title 1", "News Title 2"]
  },
  "cron": {
    "ts": 1704992400000,
    "runId": "news-cron-1704992400000",
    "fetchedTopics": 5,
    "processed": 3,
    "totalSent": 9,
    "perLanguage": {
      "ru": { "sent": 3 },
      "en": { "sent": 3 },
      "de": { "sent": 3 }
    }
  }
}
```

---

### 4. Telegram ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram –∫–∞–Ω–∞–ª—ã (RU/EN/DE), –µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã
2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –Ω–æ–≤—ã–µ –ø–æ—Å—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `news-cron`

**–£—Å–ª–æ–≤–∏—è –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è –ø–æ—Å—Ç–æ–≤:**
- –í Firebase `/forum/topics` –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Ç–µ–º—ã —Å `section: "news"`
- –¢–µ–º—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å `telegramPostedAt` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º –∏–ª–∏ `null`
- `news-cron` –¥–æ–ª–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è (—Å–º. –ø. 2)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ –ù–æ–≤—ã–µ –ø–æ—Å—Ç—ã –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ Telegram –∫–∞–Ω–∞–ª–∞—Ö –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `news-cron`
- ‚úÖ –ü–æ—Å—Ç—ã —Å–æ–¥–µ—Ä–∂–∞—Ç –∫–æ–Ω—Ç–µ–Ω—Ç –∏–∑ Firebase —Ç–µ–º
- ‚úÖ –ü–æ—Å—Ç—ã –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è (—Ç–µ–º—ã –ø–æ–º–µ—á–∞—é—Ç—Å—è `telegramPostedAt` –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏)

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ï—Å–ª–∏ –ø–æ—Å—Ç–æ–≤ –Ω–µ—Ç, —ç—Ç–æ –º–æ–∂–µ—Ç –æ–∑–Ω–∞—á–∞—Ç—å:
- –ù–µ—Ç –Ω–æ–≤—ã—Ö —Ç–µ–º –≤ Firebase (–≤—Å–µ —É–∂–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã)
- `fetch-news.js` –Ω–µ —Å–æ–∑–¥–∞–ª –Ω–æ–≤—ã–µ —Ç–µ–º—ã (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–¥–µ–ª—å–Ω–æ)
- –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram (–ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏ ENV –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ)

---

### 5. Firebase ‚Äî –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–î–µ–π—Å—Ç–≤–∏—è:**
1. –û—Ç–∫—Ä—ã—Ç—å Firebase Console ‚Üí Realtime Database
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å `/health/news/newsCronLastRun`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—É—Ç—å `/forum/topics` (—Ç–µ–º—ã —Å `section: "news"`)

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- ‚úÖ `/health/news/newsCronLastRun` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
- ‚úÖ `/forum/topics` —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–µ–º—ã —Å `section: "news"`
- ‚úÖ –¢–µ–º—ã –∏–º–µ—é—Ç –ø–æ–ª–µ `telegramPostedAt` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏

---

## üìå –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –ó–ê–ú–ï–ß–ê–ù–ò–Ø

### ‚ö†Ô∏è fetch-news.js –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç health metrics

**–°—Ç–∞—Ç—É—Å:** –ù–ï –±–ª–æ–∫–µ—Ä, –Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–ü—Ä–æ–±–ª–µ–º–∞:** –§—É–Ω–∫—Ü–∏—è `writeHealthMetrics()` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ `fetch-news.js`, –Ω–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ `handler`.

**–í–ª–∏—è–Ω–∏–µ:** Health endpoint –Ω–µ –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫ `fetch-news`, –¥–∞–∂–µ –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –î–æ–±–∞–≤–∏—Ç—å –≤—ã–∑–æ–≤ `writeHealthMetrics()` –ø–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ `news-cron.js`).

---

## üéØ –ò–¢–û–ì–û–í–´–ô –°–¢–ê–¢–£–°

- ‚úÖ **ReferenceError –∏—Å–ø—Ä–∞–≤–ª–µ–Ω:** `startTime` –∏ `runId` –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ –Ω–∞—á–∞–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞:** Scheduled –≤—ã–∑–æ–≤—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ 403
- ‚úÖ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–∫–æ–º–º–∏—á–µ–Ω—ã:** commit `c125082`
- ‚úÖ **–ò–∑–º–µ–Ω–µ–Ω–∏—è –∑–∞–ø—É—à–µ–Ω—ã:** –≤ –≤–µ—Ç–∫—É `main`
- ‚è≥ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π deploy –Ω–∞ Netlify (—Ç—Ä–∏–≥–≥–µ—Ä –æ—Ç push –≤ main)
- ‚è≥ **–û–∂–∏–¥–∞–µ—Ç—Å—è:** –°–ª–µ–¥—É—é—â–∏–π scheduled run `news-cron` (–∫–∞–∂–¥—ã–π —á–∞—Å –≤ 0 –º–∏–Ω—É—Ç)

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –í—ã–ø–æ–ª–Ω–∏—Ç—å —á–µ–∫-–ª–∏—Å—Ç –ø–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –Ω–∞ Netlify.

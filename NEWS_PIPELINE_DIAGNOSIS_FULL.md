# üîç NEWS PIPELINE DIAGNOSIS ‚Äî –ü–æ—á–µ–º—É –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤ –≤ Telegram

**Date:** 2026-01-11  
**Issue:** news-cron –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ, –Ω–æ –ø–æ—Å—Ç—ã –≤ Telegram –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è

---

## üìã CHECKLIST ANALYSIS

### 1. ‚úÖ RSS-–∏—Å—Ç–æ—á–Ω–∏–∫–∏ (fetch-news.js)

**Location:** `netlify/functions/fetch-news.js`, —Å—Ç—Ä–æ–∫–∏ 28-74

**–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–µ–Ω—Ç:** 9 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

**–°–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤:**
- **RU (3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞):**
  1. `bbc_russian` - https://feeds.bbci.co.uk/russian/rss.xml
  2. `dw_russian_all` - https://rss.dw.com/rdf/rss-ru-all
  3. `meduza_news` - https://meduza.io/rss/news

- **EN (3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞):**
  4. `bbc_world` - https://feeds.bbci.co.uk/news/world/rss.xml
  5. `dw_english_world` - https://rss.dw.com/rdf/rss-en-world
  6. `guardian_world` - https://www.theguardian.com/world/rss

- **DE (3 –∏—Å—Ç–æ—á–Ω–∏–∫–∞):**
  7. `tagesschau` - https://www.tagesschau.de/xml/rss2
  8. `dw_german_all` - https://rss.dw.com/rdf/rss-de-all

**–°—Ç–∞—Ç—É—Å:**
- ‚úÖ –ú–∞—Å—Å–∏–≤ `SOURCES` –Ω–µ –ø—É—Å—Ç–æ–π (9 —ç–ª–µ–º–µ–Ω—Ç–æ–≤)
- ‚úÖ –ù–µ—Ç —É—Å–ª–æ–≤–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç —Å–ø–∏—Å–æ–∫ –ø—É—Å—Ç—ã–º (–º–∞—Å—Å–∏–≤ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π)
- ‚úÖ –ù–µ—Ç feature flags, –≤–ª–∏—è—é—â–∏—Ö –Ω–∞ —Å–ø–∏—Å–æ–∫ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- ‚úÖ –ù–µ—Ç env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –æ—á–∏—Å—Ç–∏—Ç—å –º–∞—Å—Å–∏–≤

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- `MAX_NEW_ITEMS_PER_RUN = 2` (–º–∞–∫—Å–∏–º—É–º 2 –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ –∑–∞–ø—É—Å–∫)
- –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏—á–∏–Ω–æ–π, –µ—Å–ª–∏ –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

---

### 2. ‚ö†Ô∏è –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–º (fetch-news.js) ‚Äî –¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò –õ–û–ì–û–í

**Location:** Netlify Dashboard ‚Üí Functions ‚Üí fetch-news ‚Üí Logs

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. –ï—Å—Ç—å –ª–∏ scheduled –∑–∞–ø—É—Å–∫–∏ (–∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞: 00:00, 03:00, 06:00, 09:00, 12:00, 15:00, 18:00, 21:00 UTC)
2. –ò–ª–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å "Run now" –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏

**–ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö:**
```
‚úÖ –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—É—Å–∫:
Status: 200
Body: {"ok":true,"processed":2,"titles":[...]}

‚ùå –ù–µ—Ç –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤:
Body: {"ok":true,"processed":0,"message":"No new items"}

‚ùå –û—à–∏–±–∫–∞:
Status: 500
Body: {"ok":false,"error":"..."}
```

**–õ–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–º:**
- –ß–∏—Ç–∞–µ—Ç –≤—Å–µ 9 RSS-–∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- –§–∏–ª—å—Ç—Ä—É–µ—Ç —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ (—á–µ—Ä–µ–∑ `/newsMeta/en.json`)
- –ú–∞–∫—Å–∏–º—É–º 2 –Ω–æ–≤—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞ –∑–∞ –∑–∞–ø—É—Å–∫ (`MAX_NEW_ITEMS_PER_RUN = 2`)
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞:
  - –°–æ–∑–¥–∞–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ OpenAI
  - –ü–µ—Ä–µ–≤–æ–¥–∏—Ç –Ω–∞ –Ω—É–∂–Ω—ã–µ —è–∑—ã–∫–∏ (ru/en/de)
  - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Firebase `/forum/topics` —Å `section: "news"`

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã (–≤ `/newsMeta/en.json`)
- –û—à–∏–±–∫–∏ OpenAI API (–Ω–µ—Ç –∫–ª—é—á–∞, –ª–∏–º–∏—Ç—ã, –æ—à–∏–±–∫–∏)
- –û—à–∏–±–∫–∏ Firebase (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL)
- RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

---

### 3. ‚ö†Ô∏è Firebase ‚Äî –¢–†–ï–ë–£–ï–¢ –ü–†–û–í–ï–†–ö–ò –ë–ê–ó–´

**Location:** Firebase Console ‚Üí Realtime Database ‚Üí `/forum/topics`

**–ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

**Query –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞:**
```javascript
// –í—Å–µ —Ç–µ–º—ã —Å section="news"
/forum/topics.json?orderBy="section"&equalTo="news"
```

**–†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä—ã—Ç—å Firebase Console
2. –ü–µ—Ä–µ–π—Ç–∏ –≤ Realtime Database
3. –ù–∞–π—Ç–∏ `/forum/topics`
4. –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å:
   - **Total news topics:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–º —Å `section === "news"`
   - **Pending for telegram:** –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–º —Å `section === "news"` –∏ –ë–ï–ó –ø–æ–ª—è `telegramPostedAt`

**–û–∂–∏–¥–∞–µ–º–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–º—ã:**
```json
{
  "title": "...",
  "content": "...",
  "section": "news",
  "lang": "en|ru|de",
  "createdAt": 1234567890,
  "telegramPostedAt": 1234567890  // ‚Üê –µ—Å–ª–∏ –µ—Å—Ç—å, —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
}
```

**–ï—Å–ª–∏ –≤—Å–µ —Ç–µ–º—ã –∏–º–µ—é—Ç `telegramPostedAt`:**
- –í—Å–µ —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ
- –ù—É–∂–Ω–æ –¥–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤—ã—Ö —Ç–µ–º –æ—Ç fetch-news

**–ï—Å–ª–∏ –Ω–µ—Ç —Ç–µ–º —Å `section: "news"`:**
- fetch-news –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–µ–º—ã
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ fetch-news (—Å–º. –ø—É–Ω–∫—Ç 2)

---

### 4. ‚úÖ –§–∏–ª—å—Ç—Ä –≤ news-cron.js

**Location:** `netlify/functions/news-cron.js`, —Å—Ç—Ä–æ–∫–∏ 316-321

**–ö–æ–¥ —Ñ–∏–ª—å—Ç—Ä–∞:**
```javascript
const topics = await fetchNewsTopics();

const freshTopics = topics
  .filter((t) => !t.telegramPostedAt)
  .sort((a, b) => (a.createdAt || 0) - (b.createdAt || 0))
  .slice(0, limit);
```

**–§—É–Ω–∫—Ü–∏—è fetchNewsTopics (—Å—Ç—Ä–æ–∫–∏ 226-250):**
```javascript
const url = `${FIREBASE_DB_URL}/forum/topics.json?orderBy=%22section%22&equalTo=%22news%22`;
```

**–£—Å–ª–æ–≤–∏—è –æ—Ç–±–æ—Ä–∞ "fresh topics":**
1. ‚úÖ `section === "news"` (–∏–∑ Firebase query)
2. ‚úÖ `!telegramPostedAt` (–ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ null/undefined)
3. ‚úÖ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ `createdAt` (ascending, —Å—Ç–∞—Ä—ã–µ –ø–µ—Ä–≤—ã–µ)
4. ‚úÖ –õ–∏–º–∏—Ç: `limit` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 10, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —á–µ—Ä–µ–∑ query param)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:**

**–ï—Å–ª–∏ —Ç–µ–º–∞ –∏–º–µ–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É:**
```json
{
  "section": "news",
  "telegramPostedAt": null  // –∏–ª–∏ –ø–æ–ª–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
}
```
‚Üí ‚úÖ –î–æ–ª–∂–Ω–∞ –ø–æ–ø–∞—Å—Ç—å –≤ —Ñ–∏–ª—å—Ç—Ä

**–ï—Å–ª–∏ —Ç–µ–º–∞ –∏–º–µ–µ—Ç:**
```json
{
  "section": "news",
  "telegramPostedAt": 1234567890  // —á–∏—Å–ª–æ
}
```
‚Üí ‚ùå –ù–ï –ø–æ–ø–∞–¥–µ—Ç –≤ —Ñ–∏–ª—å—Ç—Ä (—É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–æ)

**–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –¢–µ–º–∏ –∏–º–µ—é—Ç `telegramPostedAt: 0` (—á–∏—Å–ª–æ) ‚Üí —Ñ–∏–ª—å—Ç—Ä `!t.telegramPostedAt` –ø—Ä–æ–ø—É—Å—Ç–∏—Ç (0 = falsy, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å)
- –¢–µ–º–∏ –∏–º–µ—é—Ç `section: "News"` (—Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã) ‚Üí –Ω–µ –ø–æ–ø–∞–¥—É—Ç (query –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—á–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)
- –¢–µ–º–∏ –∏–º–µ—é—Ç –¥—Ä—É–≥–æ–µ –ø–æ–ª–µ –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ Firebase

---

## üîç ROOT CAUSE ANALYSIS

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—Å–µ —Ç–µ–º—ã —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- Firebase: –í—Å–µ —Ç–µ–º—ã —Å `section: "news"` –∏–º–µ—é—Ç `telegramPostedAt`
- news-cron –ª–æ–≥–∏: `processed: 0, message: "No new topics to post"`

**Root Cause:** –û—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞ - –≤—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ —É–∂–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã

**Fix:** 
- –î–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤—ã—Ö —Ç–µ–º –æ—Ç fetch-news (–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 3 —á–∞—Å–∞)
- –ò–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç–µ–º—É –≤—Ä—É—á–Ω—É—é

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: fetch-news –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–µ–º—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- Firebase: –ù–µ—Ç —Ç–µ–º —Å `section: "news"` –∏–ª–∏ –æ—á–µ–Ω—å –º–∞–ª–æ
- fetch-news –ª–æ–≥–∏: `processed: 0` –ø–æ—Å—Ç–æ—è–Ω–Ω–æ

**Root Cause:** fetch-news –Ω–µ —Å–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–µ —Ç–µ–º—ã

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –í—Å–µ –Ω–æ–≤–æ—Å—Ç–∏ —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã (–≤ `/newsMeta/en.json`)
2. –û—à–∏–±–∫–∏ OpenAI API (–Ω–µ—Ç –∫–ª—é—á–∞, –ª–∏–º–∏—Ç—ã, –æ—à–∏–±–∫–∏)
3. –û—à–∏–±–∫–∏ Firebase (–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π URL)
4. RSS –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã

**Fix:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ fetch-news –Ω–∞ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (OPENAI_API_KEY, FIREBASE_DB_URL)
- –û—á–∏—Å—Ç–∏—Ç—å `/newsMeta/en.json` –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–æ–ø–∞—Å–Ω–æ - —Å–æ–∑–¥–∞—Å—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã)

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Mismatch —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö

**–°–∏–º–ø—Ç–æ–º—ã:**
- Firebase: –ï—Å—Ç—å —Ç–µ–º—ã —Å `section: "news"` –∏ –ë–ï–ó `telegramPostedAt`
- news-cron –ª–æ–≥–∏: `processed: 0`

**Root Cause:** –§–∏–ª—å—Ç—Ä –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç —Ç–µ–º—ã –∏–∑-–∑–∞ mismatch —Å—Ç—Ä—É–∫—Ç—É—Ä—ã

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. –¢–µ–º–∏ –∏–º–µ—é—Ç `section: "News"` (—Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã) –≤–º–µ—Å—Ç–æ `"news"`
2. –¢–µ–º–∏ –∏–º–µ—é—Ç `telegramPostedAt: 0` (—á–∏—Å–ª–æ) - –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
3. –¢–µ–º–∏ –∏–º–µ—é—Ç –¥—Ä—É–≥–æ–µ –ø–æ–ª–µ –¥–ª—è –æ—Ç–º–µ—Ç–∫–∏ –ø—É–±–ª–∏–∫–∞—Ü–∏–∏

**Fix:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ –≤ Firebase
- –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ–º –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä

---

### –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û—à–∏–±–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –≤ Telegram

**–°–∏–º–ø—Ç–æ–º—ã:**
- Firebase: –ï—Å—Ç—å —Ç–µ–º—ã –ë–ï–ó `telegramPostedAt`
- news-cron –ª–æ–≥–∏: `processed: X, totalSent: 0` (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ, –Ω–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ)

**Root Cause:** –û—à–∏–±–∫–∏ Telegram API (–Ω–µ—Ç —Ç–æ–∫–µ–Ω–∞, –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ chat_id, –æ—à–∏–±–∫–∏ API)

**Fix:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (TELEGRAM_BOT_TOKEN, TELEGRAM_NEWS_CHAT_ID_*)
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ news-cron –Ω–∞ –æ—à–∏–±–∫–∏ Telegram API

---

## üéØ RECOMMENDED DIAGNOSTIC STEPS

### Step 1: Check Netlify Logs

**fetch-news:**
1. Netlify Dashboard ‚Üí Functions ‚Üí fetch-news ‚Üí Logs
2. –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - Status code (200 = OK, 500 = error)
   - Body response (`processed` count)
   - Error messages (–µ—Å–ª–∏ –µ—Å—Ç—å)

**news-cron:**
1. Netlify Dashboard ‚Üí Functions ‚Üí news-cron ‚Üí Logs
2. –ù–∞–π—Ç–∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∑–∞–ø—É—Å–∫
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
   - `processed` count (—Å–∫–æ–ª—å–∫–æ —Ç–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ)
   - `totalSent` count (—Å–∫–æ–ª—å–∫–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ Telegram)
   - Error messages (–µ—Å–ª–∏ –µ—Å—Ç—å)

### Step 2: Check Firebase

1. Firebase Console ‚Üí Realtime Database ‚Üí `/forum/topics`
2. –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å:
   - –í—Å–µ–≥–æ —Ç–µ–º —Å `section: "news"`
   - –¢–µ–º –ë–ï–ó `telegramPostedAt` (pending)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–µ–º (section, lang, telegramPostedAt)

### Step 3: Manual Test

**–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:**

1. **–°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç–µ–º—É:**
   ```javascript
   // –í Firebase Console –∏–ª–∏ —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç
   POST /forum/topics.json
   {
     "title": "Test News Topic",
     "content": "Test content",
     "section": "news",
     "lang": "en",
     "createdAt": Date.now(),
     "authorNickname": "Test"
     // –ù–ï –¥–æ–±–∞–≤–ª—è—Ç—å telegramPostedAt
   }
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç—å news-cron:**
   - Netlify Dashboard ‚Üí Functions ‚Üí news-cron ‚Üí "Run now"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram

3. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
   - –¢–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–ª—É—á–∏—Ç—å `telegramPostedAt`
   - –ü–æ—Å—Ç –¥–æ–ª–∂–µ–Ω –ø–æ—è–≤–∏—Ç—å—Å—è –≤ Telegram

---

## üìä SUMMARY TABLE

| Check | Status | Notes |
|-------|--------|-------|
| **RSS Sources** | ‚úÖ OK | 9 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤, –º–∞—Å—Å–∏–≤ –Ω–µ –ø—É—Å—Ç–æ–π, –Ω–µ—Ç —É—Å–ª–æ–≤–∏–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ |
| **fetch-news Logs** | ‚ö†Ô∏è REQUIRES CHECK | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ Netlify Dashboard |
| **Firebase Topics** | ‚ö†Ô∏è REQUIRES CHECK | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É |
| **Filter Logic** | ‚úÖ OK | –ö–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–∞–Ω–Ω—ã–µ |
| **Telegram Send** | ‚ö†Ô∏è REQUIRES CHECK | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ |

---

## üîß MINIMAL FIX (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞)

### –ï—Å–ª–∏ –≤—Å–µ —Ç–µ–º—ã –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω—ã:
- **Fix:** –î–æ–∂–¥–∞—Ç—å—Å—è –Ω–æ–≤—ã—Ö —Ç–µ–º –æ—Ç fetch-news
- **–ò–ª–∏:** –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Ç–µ–º—É –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

### –ï—Å–ª–∏ fetch-news –Ω–µ —Å–æ–∑–¥–∞–µ—Ç —Ç–µ–º—ã:
- **Fix:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏ env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
- **–ò–ª–∏:** –û—á–∏—Å—Ç–∏—Ç—å `/newsMeta/en.json` (–æ–ø–∞—Å–Ω–æ - —Å–æ–∑–¥–∞—Å—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã)

### –ï—Å–ª–∏ mismatch —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:
- **Fix:** –ò—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–µ–º –∏–ª–∏ —Ñ–∏–ª—å—Ç—Ä
- **–ü—Ä–∏–º–µ—Ä:** –ï—Å–ª–∏ —Ç–µ–º—ã –∏–º–µ—é—Ç `section: "News"` ‚Üí –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞ `"news"`

### –ï—Å–ª–∏ –æ—à–∏–±–∫–∏ Telegram:
- **Fix:** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å env –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (TELEGRAM_BOT_TOKEN, TELEGRAM_NEWS_CHAT_ID_*)

---

## ‚úÖ VERIFICATION AFTER FIX

1. **Run fetch-news:**
   - Netlify Dashboard ‚Üí Functions ‚Üí fetch-news ‚Üí "Run now"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `processed > 0`

2. **Check Firebase:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –ø–æ—è–≤–∏–ª–∏—Å—å –Ω–æ–≤—ã–µ —Ç–µ–º—ã –ë–ï–ó `telegramPostedAt`

3. **Run news-cron:**
   - Netlify Dashboard ‚Üí Functions ‚Üí news-cron ‚Üí "Run now"
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏: `processed > 0, totalSent > 0`

4. **Check Telegram:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞–Ω–∞–ª—ã –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –Ω–æ–≤—ã—Ö –ø–æ—Å—Ç–æ–≤

---

**Next Steps:** –í—ã–ø–æ–ª–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ Netlify Dashboard –∏ Firebase Console –¥–ª—è —Ç–æ—á–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏.
